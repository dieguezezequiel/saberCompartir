"use strict";angular.module("Authentication",[]),angular.module("frontendApp",["underscore","ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.router","ui-rangeSlider","timer","duScroll","ui.bootstrap","jlareau.pnotify","directives.module","scService","ConstantsService","Authentication"]).config(["$stateProvider","$urlRouterProvider","$httpProvider",function(a,b,c){b.otherwise("/"),a.state("inicio",{url:"/",templateUrl:"views/inicio.html",controller:"InicioCtrl"}).state("registro",{url:"/registro",templateUrl:"views/registro.html",controller:"RegistroCtrl"}).state("login",{url:"/login",templateUrl:"views/login.html",controller:"LoginCtrl"}).state("dictado",{url:"/dictado",templateUrl:"views/dictado.html",controller:"DictadoCtrl"}).state("presenciado",{url:"/presenciado/:id",templateUrl:"views/presenciado.html",controller:"PresenciadoCtrl"}).state("solicitudC",{url:"/solicitud/:id",templateUrl:"views/solicitud.consulta.html",controller:"SolicitudConsultaCtrl"}).state("solicitud",{url:"/solicitud",templateUrl:"views/solicitud.crear.html",controller:"SolicitudCrearCtrl"}).state("solicitudes",{url:"/solicitudes",templateUrl:"views/solicitudes.html",controller:"SolicitudesCtrl"}).state("clases",{url:"/clases",templateUrl:"views/clases.html",controller:"ClasesCtrl"}).state("clasesKesesto",{url:"/clases/:id",templateUrl:"views/clase.consulta.html",controller:"ClaseConsultaCtrl"}).state("panel",{url:"/panel",templateUrl:"views/usuario.panel.html",controller:"UsuarioPanelCtrl"}).state("busquedaAll",{url:"/busquedaAll",templateUrl:"views/busquedaAll.html",controller:"BusquedaAllCtrl"}),c.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}]).controller("IndexCtrl",["$rootScope","$scope","$state","AuthenticationService","$scService","notificationService",function(a,b,c,d,e,f){b.searcher="",b.options=[{value:"busquedaAll",descripcion:"Buscar por..."},{value:"clases",descripcion:"Clases"},{value:"solicitudes",descripcion:"Solicitudes"}],b.buscar=function(a){switch(a.value){case"busquedaAll":b.paginado="page=0&size=3",e.getSearchClases(b.paginado,b.searcher).then(function(a){b.clases=a.data,c.go("busquedaAll",{},{reload:!0})}),e.getSearchSolicitudes(b.paginado,b.searcher).then(function(a){b.solicitudes=a.data});break;case"clases":b.paginado="page=0&size=6",e.getSearchClases(b.paginado,b.searcher).then(function(a){b.clases=a.data,c.go("clases",{},{reload:!0})});break;case"solicitudes":b.paginado="page=0&size=6",e.getSearchSolicitudes(b.paginado,b.searcher).then(function(a){b.solicitudes=a.data,c.go("solicitudes",{},{reload:!0})});break;default:c.go("busquedaAll",{},{reload:!0})}},b.messagesBuilder=function(a){var b={text:a.text,type:a.type};a.title&&(b.title=a.data.title),f.notify(b)},b.authenticated=function(){return void 0!=a.globals.currentUser},b.logout=function(){d.ClearCredentials(),c.go("login")}}]).run(["$rootScope","$state","$location","$cookieStore","$http",function(a,b,c,d,e){a.globals=d.get("globals")||{},a.globals.currentUser&&(e.defaults.headers.common.Authorization="Basic "+a.globals.currentUser.authdata),a.$on("$locationChangeStart",function(b,d,e){"/login"!==c.path()&&!a.globals.currentUser})}]),angular.module("frontendApp").controller("InicioCtrl",["$location","$scope","$q","$scService","$rootScope","AuthenticationService","notificationService",function(a,b,c,d,e,f,g){b.solicitudes="",b.usuarioLoggeado=e.globals.currentUser,b.hide=!1,b.paginado="page=0&size=3",d.getEstadosDeClase().then(function(a){b.estadosDeClase=a.data;var e=[d.getSolicitudesTopNStatePendiente("page=0&size=6","totalUsers","PENDIENTE"),d.getclasesPorEstadoOrdenadas(b.findObject(b.estadosDeClase,"PROGRAMADA").id,"date,desc",b.paginado),d.getclasesPorEstadoOrdenadas(b.findObject(b.estadosDeClase,"EN_CURSO").id,"date,desc",b.paginado),d.getUsuariosRankingOrdenados("Score",b.paginado)];c.all(e).then(function(a){b.solicitudes=a[0].data.content,b.clasesProgramadas=a[1].data.content,b.clasesEnCurso=a[2].data.content,b.usuariosRanking=a[3].data.content})},function(a){new PNotify({title:"Oh no!",text:"Usuario y/o contrase√±a invalidos",type:"error"})}),b.findObject=function(a,b){return _.find(a,function(a){return a.name==b})},b.IfICanJoinSolicitud=function(a){if(b.usuarioLoggeado){var c=_.pluck(a.joinedUsers,"id");a.sumarse=!_.contains(c,b.usuarioLoggeado.id)}},b.sumarse=function(a){d.sumarseASolicitud(a.id,b.usuarioLoggeado.id).then(function(c){b.messagesBuilder(c.data),"success"==c.data.type&&(a.totalUsers=a.totalUsers+1),a.sumarse=!1},function(b){g.error("Hubo un error, no puede unirse a "+a.subject+" por el momento")})}}]),angular.module("directives.module",[]).directive("customForm",["$timeout",function(a){return{template:'<form novalidate name="{{fName}}" class="form-horizontal" role="form" ng-submit="submitActionInterno()"><div ng-transclude></div></form>',restrict:"AE",transclude:!0,require:["form","customForm"],replace:!0,scope:{submitAction:"&",fName:"@"},link:function(a,b,c,d){var e=d[0],f=d[1];f.formController=e},controller:["$scope",function(a){a.submitActionInterno=function(){a[b].$valid&&a.submitAction()};var b=this.$name=a.fName=a.fName||"form";this.showHelpBlock=function(c){var d=!1;return"undefined"!=typeof a[b][c]&&(d=a[b].$submitted&&a[b][c].$invalid),d}}]}}]).directive("scInputLabel",["$compile","$timeout",function(a,b){return{templateUrl:"templates/directives/sc-inputLabel.html",restrict:"AE",replace:!0,require:"^customForm",scope:{model:"=",label:"@",inputName:"@",placeholder:"@",type:"@?",helpMsg:"@",maxlength:"@?",minlength:"@?",disabled:"=?",required:"=",iconText:"@?",labelCol:"=?",inputCol:"=?",notShowLabel:"=?",validators:"=?",regex:"@?"},link:function(c,d,e,f){c.showHelpBlock=f.showHelpBlock;var g=function(b,e){var f=d.find("input");f.attr(b,e),a(f)(c)};b(function(){c.validators&&c.validators.forEach(function(a){g(a,"")})},0)}}}]),angular.module("frontendApp").controller("DictadoCtrl",["$scope","$scService","$q","Constants","_","$stateParams","notificationService","$location","$rootScope",function(a,b,c,d,e,f,g,h,i){a.webrtc=new SimpleWebRTC({localVideoEl:"localVideo",autoRequestMedia:!0,url:d.URL_SIGNALING_SERVER}),a.isMakingRequest=!1,a.cantidadUsuariosConectados=0,a.claseIsValid=!1,a.readyToCall=!1,a.claseEnCurso=!1,a.tiempoDeClase=0,a.estadoClaseMensaje=d.EstadosClase.CONECTANDO,a.cantidadMensajes=0,a.usuariosConectados=[],a.volumen=8,a.volumenMin=0,a.volumenMax=10,a.microfonoMuteado=!1,a.duracionClase=0,a.messages=[],a.myMessage="",a.usuario={username:i.globals.currentUser.username,id:i.globals.currentUser.publicId},a.startTimer=function(){a.$broadcast("timer-start"),a.timerRunning=!0},a.stopTimer=function(){a.$broadcast("timer-stop"),a.timerRunning=!1},a.$on("timer-stopped",function(a,b){console.log("Timer Stopped - data = ",b)}),a.enviarMensaje=function(){var b={user:{}};b.user.name=a.usuario.username,b.data=a.myMessage,a.messages.push(b),a.webrtc.sendToAll("peer-text",{user:a.usuario.username,message:a.myMessage}),a.myMessage=""},a.enviarMensajeAUsuario=function(){},a.comenzarClase=function(){a.webrtc.createRoom(a.clase.id.toString(),function(c,e){c?console.log(c):(console.log(e),a.estadoClaseMensaje=d.EstadosClase.EN_CURSO,a.claseEnCurso=!0,a.clase.state=a.findObject(a.estadosDeClase,"EN_CURSO"),b.updateClase(a.clase),a.startTimer()),a.$apply()})},a.terminarClase=function(){a.webrtc.stopScreenShare(),a.webrtc.stopLocalVideo(),a.webrtc.leaveRoom(),a.webrtc.disconnect(),a.estadoClaseMensaje=d.EstadosClase.FINALIZADA,a.clase.state=a.findObject(a.estadosDeClase,"FINALIZADA"),b.updateClase(a.clase),a.stopTimer()},a.mutearMicrofono=function(){a.microfonoMuteado?a.desmutearMicrofono():(a.webrtc.mute(),a.microfonoMuteado=!0)},a.desmutearMicrofono=function(){a.webrtc.unmute(),a.microfonoMuteado=!1},a.estadoClaseChange=function(){},a.openConnections=function(){},a.webrtc.on("readyToCall",function(b){console.log(b),a.estadoClaseMensaje=d.EstadosClase.EN_ESPERA,a.readyToCall=!0,a.$apply()}),a.webrtc.on("localMediaError",function(b){a.estadoClaseMensaje=d.EstadosClase.LOCAL_MEDIA_ERROR}),a.webrtc.connection.on("message",function(b){if("peer-text"===b.type){console.log(b);var c={user:{}};c.user.name=b.payload.user,c.data=b.payload.message,a.messages.push(c),a.$apply()}}),a.webrtc.on("createdPeer",function(b){var c={id:b.id,nombre:b.nick};a.usuariosConectados.push(c),a.cantidadUsuariosConectados=a.cantidadUsuariosConectados+1,a.$apply()}),a.webrtc.connection.on("remove",function(b){a.cantidadUsuariosConectados=a.cantidadUsuariosConectados-1,a.usuariosConectados.pop(),a.$apply()}),a.webrtc.on("leftRoom",function(b){console.log("Terminaste la clase ",b),a.cantidadUsuariosConectados=0}),a.$on("$destroy",function(){a.terminarClase()}),a.volumenChange=function(){},a.abrirChat=function(){a.showChat=!0,a.showChatConfiguracion=!1,a.showUsuariosConectados=!1},a.abrirUsuariosConectados=function(){a.showChat=!1,a.showChatConfiguracion=!1,a.showUsuariosConectados=!0},a.abrirChatConfiguracion=function(){a.showChat=!1,a.showChatConfiguracion=!0,a.showUsuariosConectados=!1},a.safeApply=function(a){var b=this.$root.$$phase;"$apply"==b||"$digest"==b?a&&"function"==typeof a&&a():this.$apply(a)},a.findObject=function(a,b){return e.find(a,function(a){return a.name==b})},a.init=function(){a.isMakingRequest=!0,b.getEstadosDeClase().then(function(c){a.estadosDeClase=c.data,b.getEstablishedClassroom().then(function(b){a.clase=b.data,""!=a.clase?(a.abrirChat(),a.claseIsValid=!0,a.isMakingRequest=!1,a.openConnections):(g.error("No tienes ninguna clase establecida o programada"),h.path("/#"))},function(b){console.log(b.data),a.claseIsValid=!1,g.error("Error inesperado. Lo sentimos."),h.path("/#")})},function(b){a.claseIsValid=!1,g.error("Error inesperado. Lo sentimos."),h.path("/#")})},a.init()}]),angular.module("frontendApp").controller("PresenciadoCtrl",["$scope","$scService","$q","Constants","$stateParams","$location","notificationService","$rootScope",function(a,b,c,d,e,f,g,h){a.idClase=e.id,a.claseFinalizada=!1,a.calificacion=0,a.userWasJoined=!1,a.messages=[],a.myMessage="",a.usuario={username:h.globals.currentUser.username,id:h.globals.currentUser.publicId},a.enviarMensaje=function(){var b={user:{}};b.user.name=a.usuario.username,b.data=a.myMessage,a.messages.push(b),a.webrtc.sendToAll("peer-text",{user:a.usuario.username,message:a.myMessage}),a.myMessage=""},a.enviarMensajeAUsuario=function(){},a.abrirChat=function(){a.showChat=!0,a.showChatConfiguracion=!1,a.showUsuariosConectados=!1},a.abrirUsuariosConectados=function(){a.showChat=!1,a.showChatConfiguracion=!1,a.showUsuariosConectados=!0},a.abrirChatConfiguracion=function(){a.showChat=!1,a.showChatConfiguracion=!0,a.showUsuariosConectados=!1},a.$on("$destroy",function(){a.unjoinClassRoom()}),a.unjoinClassRoom=function(){a.webrtc.leaveRoom(),a.webrtc.disconnect(),b.unjoinClassRoom(a.clase.id).then(function(){},function(){g.error("Error inesperado. Lo sentimos")})},a.joinClassRoom=function(){a.webrtc=new SimpleWebRTC({media:{video:!1,audio:!1},url:d.URL_SIGNALING_SERVER,nick:"Ricardo Fort",remoteVideosEl:"remoteVideo"}),a.abrirChat(),a.webrtc.connection.on("remove",function(b){a.claseFinalizada=!0,a.$apply()}),a.webrtc.on("connectionReady",function(b){a.webrtc.joinRoom(a.clase.id.toString(),function(a,b){console.log(a),console.log(b)})}),a.webrtc.connection.on("message",function(b){if("peer-text"===b.type){console.log(b);var c={user:{}};c.user.name=b.payload.user,c.data=b.payload.message,a.messages.push(c),a.$apply()}}),a.webrtc.on("createdPeer",function(a){console.log(a)}),b.joinClassRoom(a.clase.id).then(function(){a.userWasJoined=!0},function(){g.error("Error inesperado. Lo sentimos")})},a.calificar=function(c){b.calificarClase(a.clase.id,c).then(function(a){},function(a){})},a.init=function(){b.getClaseById(a.idClase).then(function(b){if(a.clase=b.data,a.clase)switch(a.clase.state.id){case 0:break;case 1:a.joinClassRoom();break;case 2:a.joinClassRoom();break;case 3:a.joinClassRoom();break;case 4:a.claseFinalizada=!0;break;case 5:}else f.path("/")},function(a){return!1})},a.init()}]),angular.module("frontendApp").controller("SolicitudConsultaCtrl",["$scope","UsuarioResource","notificationService","$scService","$stateParams","$location",function(a,b,c,d,e,f){a.idSolicitud=e.id,a.solicitudIsValid=!1,a.isMakingRequest=!1,a.tomarSolicitud=function(){d.tomarSolicitudAndCrearClase(a.idSolicitud,a.solicitud).then(function(b){a.claseTomadaConExito=!0,c.success("Clase programada!"),f.path("/panel")},function(b){a.claseTomadaConExito=!1,c.error("Error inesperado. Lo sentimos.")})},a.init=function(){a.isMakingRequest=!0,d.getSolicitudById(a.idSolicitud).then(function(b){a.solicitud=b.data,""!=a.solicitud?a.solicitudIsValid=!0:a.solicitudIsValid=!1,a.isMakingRequest=!1},function(){a.isMakingRequest=!1,c.error("Error del sistema")})},a.init()}]),angular.module("frontendApp").controller("SolicitudCrearCtrl",["$scope","UsuarioResource","notificationService","$scService","$q","$location",function(a,b,c,d,e,f){a.categoriaList=[];var g=[d.getCategorias()];e.all(g).then(function(b){a.categoriaList=b[0].data},function(a){}),a.save=function(){d.saveSolicitud(a.solicitud).then(function(){c.success("Solicitud creada!"),f.path("panel")},function(){c.error("Error inesperado. Lo sentimos.")})}}]);var LETRAS_REGEXP=/^[a-zA-Z √±√ë]*$/,NUMEROS_REGEXP=/^[0-9]*$/;angular.module("directives.module").directive("soloNumeros",function(){return{require:"ngModel",link:function(a,b,c,d){var e="",f=a;d.$formatters.unshift(function(a){if(void 0!=a){var b=""===a||a&&NUMEROS_REGEXP.test(a);e=b?a:e,f.model=e,d.$setValidity("soloNumeros",b)}return b?e:""})}}}).directive("soloLetras",function(){return{require:"ngModel",link:function(a,b,c,d){var e="",f=a;d.$formatters.unshift(function(a){if(void 0!=a){var b=""===a||a&&LETRAS_REGEXP.test(a);e=b?a:e,f.model=e,d.$setValidity("soloLetras",b)}return b?a:e})}}}).directive("sinEspacios",function(){return{require:"ngModel",link:function(a,b,c,d){b.bind("keypress",function(a){var b=a.keyCode||a.which;return 32==b?!1:void 0})}}}),angular.module("scService",[]).factory("$scService",["$http",function(a){var b={};return b.getCategorias=function(){var b="api/categories";return a.get(b)},b.getSearchClases=function(b,c){var d="api/classrooms?"+b+"&searchValue="+c;return a.get(d)},b.getEstadosDeClase=function(){var b="api/classrooms/states";return a.get(b)},b.getclasesPorEstadoOrdenadas=function(b,c,d){var e="api/classrooms?state="+b+"&"+d+"&sort="+c;return a.get(e)},b.getclases=function(b){var c="api/classrooms?"+b;return a.get(c)},b.getRankingSolicitudes=function(){var b="api/classrooms/Ranking";return a.get(b)},b.updateClase=function(b){var c="api/classrooms/"+b.id;return a.put(c,b)},b.getClaseById=function(b){var c="api/classrooms/"+b;return a.get(c)},b.getClassroomsByState=function(b){var c="api/classrooms?state="+b;return a.get(c)},b.getEstablishedClassroom=function(){var b="api/classrooms/established";return a.get(b)},b.getClasesPorEstadoYUsuario=function(b,c,d){var e="api/classrooms?state="+b+"&user="+c+"&page="+d.page+"&size="+d.size;return a.get(e)},b.getClasesPresenciadasPorUsuario=function(b,c){var d="api/classrooms?guestUserHistory="+b+"&page="+c.page+"&size="+c.size;return a.get(d)},b.getClasesFavoritasPorUsuario=function(b,c){var d="api/classrooms?user="+b+"&page="+c.page+"&size="+c.size;return a.get(d)},b.streamClaseById=function(b){var c="api/classrooms/"+b+"/stream";return a.get(c)},b.joinClassRoom=function(b){var c="api/classrooms/"+b+"/join";return a.get(c)},b.unjoinClassRoom=function(b){var c="api/classrooms/"+b+"/unjoin";return a.get(c)},b.calificarClase=function(b,c){var d="api/classrooms/"+b+"/qualify";return a.post(d,c)},b.saveSolicitud=function(b){var c="api/requests";return a.post(c,b)},b.getEstadosDeSolicitud=function(){var b="api/requests/states";return a.get(b)},b.getSolicitudes=function(b){var c="api/requests?"+b;return a.get(c)},b.getSolicitudesValidas=function(b){var c="api/requests/validas?"+b;return a.get(c)},b.sumarseASolicitud=function(b,c){var d="api/requests?solicitudId="+b+"&userId="+c;return a.get(d)},b.getSolicitudesTopNStatePendiente=function(b,c,d){var e="api/requests?"+b+"&sort="+c+",desc&state="+d;return a.get(e)},b.getSearchSolicitudes=function(b,c){var d="api/requests?"+b+"&searchValue="+c;return a.get(d)},b.getSolicitudById=function(b){var c="api/requests/"+b;return a.get(c)},b.tomarSolicitudAndCrearClase=function(b,c){var d="api/requests/"+b+"/take";return a.post(d,c)},b.getSolicitudesPorEstadoYUsuario=function(b,c,d){var e="api/requests?state="+b+"&user="+c+"&page="+d.page+"&size="+d.size;return a.get(e)},b.getUsuariosRankingOrdenados=function(b,c){var d="api/usuarios?"+c+"&order="+b;return a.get(d)},b}]),angular.module("ConstantsService",[]).constant("Constants",{EstadosClase:{EN_ESPERA:"Todo listo! Ya puedes empezar tu clase.",EN_CURSO:"Clase en curso.",FINALIZADA:"Clase finalizada.",ERRONEA:"Ha ocurrido un error :( Int√©ntelo de nuevo :)",LOCAL_MEDIA_ERROR:"Parece que has olvidado permitir el acceso de tu c√°mara web y micr√≥fono, ¬øno?",CONECTANDO:"Estamos conect√°ndote al mundo, espere un momento."},URL_SIGNALING_SERVER:"http://signalmaster:8888"}),angular.module("Authentication").factory("AuthenticationService",["$http","$cookieStore","$rootScope","$timeout","UsuarioResource",function(a,b,c,d,e){var f={};return f.Login=function(a,b){e.login(a,function(a){b(a)})},f.SetCredentials=function(d){var e=btoa(d.username+":"+d.password);c.globals={currentUser:{username:d.username,id:d.id,authdata:e}},a.defaults.headers.common.Authorization="Basic "+e,b.put("globals",c.globals)},f.isAuthenticated=function(){return void 0!=c.globals.currentUser},f.ClearCredentials=function(){c.globals={},b.remove("globals"),a.defaults.headers.common.Authorization="Basic "},f}]),angular.module("frontendApp").controller("RegistroCtrl",["$scope","$state","UsuarioResource","notificationService",function(a,b,c,d){a.usuario={},a.guardar=function(){var e=c.create(a.usuario);e.$promise.then(function(a){"error"==a.type?d.error(a.text):d.success(a.text),b.go("login")},function(a){d.error(a.text)})}}]),angular.module("Authentication").controller("LoginCtrl",["$rootScope","$scope","$location","$state","UsuarioResource","$http","AuthenticationService",function(a,b,c,d,e,f,g){b.usuario={},b.login=function(){b.dataLoading=!0,g.Login(b.usuario,function(a){void 0!=a.email?(b.usuario.id=a.id,g.SetCredentials(b.usuario),new PNotify({title:"Has iniciado sesion!",text:"Bienvenido!",type:"success"}),d.go("inicio",{},{reload:!0})):new PNotify({title:"Oh no!",text:"Usuario o Contrase√±a invalidos",type:"error"})})}}]),angular.module("frontendApp").controller("SolicitudesCtrl",["$scope","$q","$scService","notificationService","$rootScope",function(a,b,c,d,e){if(a.paginado="page=0&size=6",a.usuarioLoggeado=e.globals.currentUser,!a.searcher){var f=[c.getSolicitudesValidas(a.paginado)];b.all(f).then(function(b){a.solicitudes=b[0].data})}a.IfICanJoinSolicitud=function(b){if(a.usuarioLoggeado){var c=_.pluck(b.joinedUsers,"id");b.sumarse=!_.contains(c,a.usuarioLoggeado.id)}},a.sumarse=function(b){c.sumarseASolicitud(b.id,a.usuarioLoggeado.id).then(function(c){a.messagesBuilder(c.data),"success"==c.data.type&&(b.totalUsers=b.totalUsers+1),b.sumarse=!1},function(a){d.error("Hubo un error, no puede unirse a "+b.subject+" por el momento")})},a.$watch("currentPage",function(b,d){angular.equals(b,d)||(a.paginado="page="+(a.currentPage-1).toString()+"&size=6",c.getSearchSolicitudes(a.paginado,a.searcher).then(function(b){a.solicitudes=b.data}))})}]),angular.module("frontendApp").controller("UsuarioPanelCtrl",["$scope","$scService","$q","$state","AuthenticationService","$location","$rootScope",function(a,b,c,d,e,f,g){a.cantidadClasesFinalizadas=0,a.cantidadClasesProgramadas=0,a.cantidadClasesPresenciadas=0,a.cantidadSolicitudesPendientes=0,a.cantidadSolicitudesARealizar=0,a.cantidadClasesFavoritas=0,a.paginacion={page:0,size:10},a.showMenu=!0,a.showMenuClasesProgramadas=!1,a.showMenuClasesFinalizadas=!1,a.showMenuClasesPresenciadas=!1,a.showMenuClasesFavoritas=!1,a.showMenuSolicitudesPendientes=!1,a.showMenuSolicitudesARealizar=!1,a.usuario={username:g.globals.currentUser.username,id:g.globals.currentUser.publicId},e.isAuthenticated()||d.go("login");var h=[b.getEstadosDeClase(),b.getEstadosDeSolicitud()];c.all(h).then(function(d){a.estadosDeClase=d[0].data,a.estadosDeSolicitud=d[1].data;var e=[b.getClasesPorEstadoYUsuario(a.findObject(a.estadosDeClase,"FINALIZADA").id,a.usuario.username,a.paginacion),b.getClasesPorEstadoYUsuario(a.findObject(a.estadosDeClase,"PROGRAMADA").id,a.usuario.username,a.paginacion),b.getClasesPresenciadasPorUsuario(a.usuario.username,a.paginacion),b.getClasesFavoritasPorUsuario(a.usuario.username,a.paginacion),b.getSolicitudesPorEstadoYUsuario("PENDIENTE",a.usuario.username,a.paginacion),b.getSolicitudesPorEstadoYUsuario("A_REALIZARSE",a.usuario.username,a.paginacion)];c.all(e).then(function(b){a.clasesFinalizadas=b[0].data.content,a.clasesProgramadas=b[1].data.content,a.clasesPresenciadas=b[2].data.content,a.clasesFavoritas=b[3].data.content,a.solicitudesPendientes=b[4].data.content,a.solicitudesARealizar=b[5].data.content,a.cantidadClasesFinalizadas=b[0].data.totalElements,a.cantidadClasesProgramadas=b[1].data.totalElements,a.cantidadClasesPresenciadas=b[2].data.totalElements,a.cantidadClasesFavoritas=b[3].data.totalElements,a.cantidadSolicitudesPendientes=b[4].data.totalElements,a.cantidadSolicitudesARealizar=b[5].data.totalElements},function(a){})},function(){}),a.goToUrl=function(a){f.url(a)},a.findObject=function(a,b){return _.find(a,function(a){return a.name==b})}}]),angular.module("frontendApp").controller("ClasesCtrl",["$scope","$q","$scService",function(a,b,c){a.paginado="page=0&size=6";var d=[c.getclases(a.paginado)];b.all(d).then(function(b){a.searcher||(a.clases=b[0].data)}),a.$watch("currentPage",function(b,d){angular.equals(b,d)||(a.paginado="page="+(a.currentPage-1).toString()+"&size=6",c.getSearchClases(a.paginado,a.searcher).then(function(b){a.clases=b.data}))})}]),angular.module("frontendApp").controller("ClaseConsultaCtrl",["$scope","$q","$scService","$stateParams","notificationService","$location",function(a,b,c,d,e,f){a.idClase=d.id,a.claseIsValid=!1,a.isMakingRequest=!1,a.init=function(){a.isMakingRequest=!0,c.getClaseById(a.idClase).then(function(b){a.clase=b.data,""!=a.clase?a.claseIsValid=!0:a.solicitudIsValid=!1,a.isMakingRequest=!1},function(){a.isMakingRequest=!1,e.error("Error del sistema")})},a.dictarClase=function(){c.streamClaseById(a.idClase).then(function(){f.path("/dictado")},function(){e.error("Ha ocurrido un error inesperado. Lo sentimos")})},a.init()}]),angular.module("frontendApp").controller("BusquedaAllCtrl",["$scope","$q","$scService","$rootScope","notificationService",function(a,b,c,d,e){if(a.paginado="page=0&size=3",a.usuarioLoggeado=d.globals.currentUser,!a.searcher){var f=[c.getclases(a.paginado),c.getSolicitudesValidas(a.paginado)];b.all(f).then(function(b){a.clases=b[0].data,a.solicitudes=b[1].data})}a.IfICanJoinSolicitud=function(b){if(a.usuarioLoggeado){var c=_.pluck(b.joinedUsers,"id");b.sumarse=!_.contains(c,a.usuarioLoggeado.id)}},a.sumarse=function(b){c.sumarseASolicitud(b.id,a.usuarioLoggeado.id).then(function(c){a.messagesBuilder(c.data),"success"==c.data.type&&(b.totalUsers=b.totalUsers+1),b.sumarse=!1},function(a){e.error("Hubo un error, no puede unirse a "+b.subject+" por el momento")})},a.$watch("currentPageClase",function(b,d){angular.equals(b,d)||(a.paginado="page="+(a.currentPageClase-1).toString()+"&size=3",c.getSearchClases(a.paginado,a.searcher).then(function(b){a.clases=b.data}))}),a.$watch("currentPageSolicitud",function(b,d){angular.equals(b,d)||(a.paginado="page="+(a.currentPageSolicitud-1).toString()+"&size=3",c.getSearchSolicitudes(a.paginado,a.searcher).then(function(b){a.solicitudes=b.data}))})}]),angular.module("frontendApp").factory("UsuarioResource",["$resource",function(a){var b="api/usuarios/";return a(b,{},{create:{method:"POST"},login:{method:"POST",url:b+"login"}})}]),angular.module("frontendApp").run(["$templateCache",function(a){a.put("views/busquedaAll.html",'<div class="containerBusquedas"> <div class="container-home container container-home" id="main"> <div class="row"> <span class="titulo-blanco col-xs-12"><span class="glyphicon glyphicon-book"></span>Solicitudes</span> </div> </div> <div class="container"> <div class="row"> <div ng-repeat="solicitud in solicitudes.content" class="col-md-4"> <div class="panel panel-default"> <div class="panel-body" ng-init="IfICanJoinSolicitud(solicitud)"> <div ng-show="solicitud.sumarse" class="mas cursor" ng-click="sumarse(solicitud)"> <span class="glyphicon glyphicon-plus"></span> <spans> Me Sumo </spans> </div> <div class="col-xs-12 titulo-violeta">{{solicitud.subject}}</div> <p class="col-xs-12">Personas interesadas: {{solicitud.totalUsers}}</p><p> </p><p class="col-xs-12">Estado: {{solicitud.state}}</p><p> <a class="mas cursor" href="#/solicitud/{{solicitud.id}}"> <span class="glyphicon glyphicon-user"></span> <spans>Quiero dar esta clase</spans> </a> </p></div> </div> </div> <div class="col-md-4"> <div ng-show="solicitudes.content.length == 0" class="mensajeTextoPlano">No hubo resultados para <span class="resaltadorTextoPlanoAmarillo">{{searcher}}</span></div> <div ng-show="solicitudes.content.length == 0" class="panel panel-default"> <div class="panel-head text-center"> ¬øDesea crear una nueva solicitud? </div> <div class="panel-body text-center"> <a class="mas cursor" href="#/solicitud"> <span class="glyphicon glyphicon-plus xl-icon"></span> </a> </div> </div> </div> </div> <ul ng-show="solicitudes.content.length < solicitudes.totalElements" uib-pagination boundary-links="true" total-items="solicitudes.totalElements" items-per-page="solicitudes.size" ng-model="currentPageSolicitud" max-size="5" class="pagination-md pull-right" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"> </ul> </div> <div class="container"> <div class="row"> <span class="titulo-blanco col-xs-12"><span class="glyphicon glyphicon-book"></span>Clases</span> </div> </div> <div class="container"> <div class="row"> <div ng-repeat="clase in clases.content" class="col-md-4"> <div class="panel panel-default"> <div class="panel-body"> <div ng-hide="hide" class="mas cursor" ng-click="sumarse(clase)"> <span class="glyphicon glyphicon-plus"></span> <spans>Unirme</spans> </div> <div class="col-xs-12 titulo-violeta">{{clase.name}}</div> <p class="col-xs-12">{{clase.description}}</p><p> </p><p class="col-xs-12">{{clase.user.firstName}} {{clase.user.lastName}}</p><p> </p></div> </div> </div> <div class="col-md-4"> <div ng-show="clases.content.length == 0" class="mensajeTextoPlano">No hubo resultados para <span class="resaltadorTextoPlanoAmarillo">{{searcher}}</span></div> <div ng-show="clases.content.length == 0" class="panel panel-default"> <div class="panel-head text-center"> ¬øDesea crear una nueva clase? </div> <div class="panel-body text-center"> <a class="mas cursor" href="#/clases"> <span class="glyphicon glyphicon-plus xl-icon"></span> </a> </div> </div> </div> </div> <ul ng-show="clases.content.length < clases.totalElements" uib-pagination boundary-links="true" total-items="clases.totalElements" items-per-page="clases.size" ng-model="currentPageClase" max-size="5" class="pagination-md pull-right" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"> </ul> </div> </div>'),a.put("views/clase.consulta.html",'<!--\nInformacion\n-Nombre\n-Descripcion\n-Estado\n-Fecha y horario programado\n-Puntaje\n-Categoria\n-Usuario\n-Usuarios invitados\n\nAcciones\n-Si es el propietario de la clase\n  -Dictar\n  -Cancelar\n  -Reprogramar\n-Si no es el propietario de la clase\n  -A√±adir a favoritos.\n\n--> <div class="container"> <div class="row top-buffer"> <div class="col-xs-12"> <div ng-show="claseIsValid"> <div> {{clase.name}} </div> <div> {{clase.description}} </div> <div> {{clase.state.name}} </div> <div> {{clase.score}} </div> <div> {{clase.category.name}} </div> <div> {{clase.date | date}} </div> <div> {{clase.user}} </div> <div> {{clase.guestUsers}} </div> </div> </div> <div class="col-xs-12" ng-show="claseIsValid"> <div> <button class="btn-sc btn-success-sc" ng-click="dictarClase()">Dar clase ahora!</button> </div> </div> <div class="col-xs-12" ng-show="!claseIsValid && !isMakingRequest"> <div class="resource-not-found"> <img src="images/logo_brain1.bf5e6816.png" alt=""> <div>Esta clase no est&aacute disponible.</div> </div> </div> </div> </div>'),a.put("views/clases.html",'<div class="containerBusquedas"> <div class="container-home container container-home" id="main"> <div class="row"> <span class="titulo-blanco col-xs-12"><span class="glyphicon glyphicon-book"></span>Clases</span> </div> </div> <div class="container"> <div class="row"> <div ng-repeat="clase in clases.content" class="col-md-4"> <div class="panel panel-default"> <div class="panel-body"> <div ng-hide="hide" class="mas cursor" ng-click="sumarse(clase)"> <span class="glyphicon glyphicon-plus"></span> <spans>Unirme</spans> </div> <div class="col-xs-12 titulo-violeta">{{clase.name}}</div> <p class="col-xs-12">{{clase.description}}</p><p> </p><p class="col-xs-12">{{clase.user.firstName}} {{clase.user.lastName}}</p><p> </p></div> </div> </div> <div class="col-md-4"> <div ng-show="clases.content.length == 0" class="mensajeTextoPlano">No hubo resultados para <span class="resaltadorTextoPlanoAmarillo">{{searcher}}</span></div> <div ng-show="clases.content.length == 0" class="panel panel-default"> <div class="panel-head text-center"> ¬øDesea crear una nueva clase? </div> <div class="panel-body text-center"> <a class="mas cursor" href="#/clases"> <span class="glyphicon glyphicon-plus xl-icon"></span> </a> </div> </div> </div> </div> <ul ng-show="clases.content.length < clases.totalElements" uib-pagination boundary-links="true" total-items="clases.totalElements" items-per-page="clases.size" ng-model="currentPage" max-size="5" class="pagination-md" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"> </ul> </div> </div>'),a.put("views/dictado.html",'<!--\n  Informacion:\n  -Cantidad de usuarios conectados a la clase.\n  -Video local\n  -Chat\n\n  Controles:\n  -Control de volumen de mic.\n  -Agrandar/achicar video local (s√≥lo para el usuario que est√° streameando)\n\n\n  Administracion:\n  -Administrar chat.\n  -Terminar clase.\n  -Empezar clase. (La clase no empieza automaticamente se accede a la cam y mic)\n\n--> <div class="container dictado-container"> <div class="row full-height-percent top-buffer"> <span ng-show="!isMakingRequest"> <div class="col-lg-6 col-md-6 col-xs-12"> <div class="row"> <div class="col-lg-12"> <div class="video-container"> <video id="localVideo"></video> </div> </div> </div> <div class="row"> <div class="col-lg-1"> <!--          <div range-slider\n                               class="volumen no-margin"\n                               orientation="vertical right"\n                               on-handle-up="volumenChange()"\n                               min="volumenMin"\n                               max="volumenMax"\n                               model-max="volumen"\n                               pin-handle="min"></div>\n                        --> <button ng-click="mutearMicrofono()" class="btn btn-default btn-lg btn-link" ng-class="microfonoMuteado ? \'color-red\': \'color-green\'"> <span class="glyphicon glyphicon-volume-up"></span> </button> </div> <div class="col-lg-11"> <div class="row"> <div class="col-lg-12 col-md-12 col-xs-12"> <div class="panel panel-default controls-container text-center"> <div class="panel-body"> <button class="btn-sc btn-success-sc square-border" ng-show="!claseEnCurso" ng-click="comenzarClase()">COMENZAR</button> <button class="btn-sc btn-success-sc square-border" ng-show="claseEnCurso" ng-click="terminarClase()">TERMINAR</button> </div> </div> </div> <div class="col-lg-12 col-md-12 col-xs-12"> <div class="panel panel-default info-streaming-container"> <div class="panel-body"> <div class="tiempo-container text-center"> <!--Formatear a hh:mm:ss--> <p><timer autostart="false" interval="1000">{{hhours}}:{{mminutes}}:{{sseconds}}</timer></p> </div> <div class="mensajes-container text-center"> <p><b>Estado: </b>{{estadoClaseMensaje}}</p> </div> </div> </div> </div> </div> </div> </div> </div> <!--En mobile esto se oculta y se ve se hace--> <div class="col-lg-6 col-md-6 full-height-percent"> <div class="row full-height-percent"> <div class="col-lg-11 col-md-11 full-height-percent overflow-hidden"> <!--CHAT CONTAINER--> <div class="row chat-container full-height-percent animation-chat" ng-class="showChat ? \'animation-show\' : \'animation-hide\'"> <div class="col-lg-12 messages-container"> <ul class="messages"> <div ng-repeat="message in messages"> {{ message.user.name }}: {{ message.data }} </div> </ul> </div> <div class="col-lg-12"> <form ng-submit="enviarMensaje()"> <div class="input-group"> <input type="text" class="form-control square-border" ng-model="myMessage"> <span class="input-group-btn"> <button class="btn btn-default square-border" type="submit"><span class="glyphicon glyphicon-chevron-right"></span></button> </span> </div> </form> </div> </div> <!--USUARIOS CONECTADOS CONTAINER--> <div class="row full-height-percent animation-chat" ng-class="showUsuariosConectados ? \'animation-show\' : \'animation-hide\'"> <h3>USUARIOS CONECTADOS</h3> <ul ng-repeat="usuario in usuariosConectados"> <li>{{usuario.nombre}}</li> </ul> </div> <!--CHAT CONFIGURACION CONTAINER--> <div class="row full-height-percent animation-chat" ng-class="showChatConfiguracion ? \'animation-show\' : \'animation-hide\'"> <div class="list-group"> <h3>CONFIGURACI√ìN</h3> <button type="button" class="list-group-item">Chat</button> <button type="button" class="list-group-item">Usuarios</button> <button type="button" class="list-group-item">Ayuda</button> <button type="button" class="list-group-item">Reportar problema</button> </div> </div> </div> <div class="col-lg-1 col-md-1"> <div class="row"> <div class="col-lg-12 no-padding margin-top-10"> <div class="icon-badge-container"> <button ng-click="abrirChat()" class="btn btn-default btn-lg btn-link square-border" ng-class="showChat ? \'active\': \'\'"> <span class="glyphicon glyphicon-comment"></span> </button> <span class="badge badge-notify">{{cantidadMensajes}}</span> </div> </div> <div class="col-lg-12 no-padding margin-top-10"> <div class="icon-badge-container"> <button ng-click="abrirUsuariosConectados()" class="btn btn-default btn-lg btn-link square-border" ng-class="showUsuariosConectados ? \'active\': \'\'"> <span class="glyphicon glyphicon-user"></span> </button> <span class="badge badge-notify">{{cantidadUsuariosConectados}}</span> </div> </div> <div class="col-lg-12 no-padding margin-top-10"> <button type="button" ng-click="abrirChatConfiguracion()" class="btn btn-default btn-lg btn-link square-border" aria-label="Left Align" ng-class="showChatConfiguracion ? \'active\': \'\'"> <span class="glyphicon glyphicon-cog" aria-hidden="true"></span> </button> </div> </div> </div> </div> </div> </span> </div> </div>'),
a.put("views/inicio.html",'<div class="hero-unit home text-center"> <div class="vertical-center"> <img src="../../images/logo1.8edb8733.png" alt=""> <h2>Compartir es m√°s f√°cil.</h2> </div> <h1> <p class="element-bottom"><a du-smooth-scroll="main" duration="1000"><i class="glyphicon glyphicon-chevron-down"></i></a></p> </h1> </div> <div class="container-home container container-home" id="main"> <div class="row"> <span class="titulo-blanco col-xs-12"><span class="glyphicon glyphicon-book"></span> Clases m√°s solicitadas</span> <div ng-repeat="solicitud in solicitudes" class="col-md-4"> <div class="panel panel-default"> <div class="panel-body" ng-init="IfICanJoinSolicitud(solicitud)"> <div ng-show="solicitud.sumarse" class="mas cursor" ng-click="sumarse(solicitud)"> <span class="glyphicon glyphicon-plus"></span> <spans> Me Sumo </spans> </div> <div class="col-xs-12 titulo-violeta">{{solicitud.subject}}</div> <p class="col-xs-12">Personas interesadas: {{solicitud.totalUsers}}</p><p> </p><p class="col-xs-12">Estado: {{solicitud.state}}</p><p> <a class="mas cursor" href="#/solicitud/{{solicitud.id}}"> <span class="glyphicon glyphicon-user"></span> <spans>Quiero dar esta clase</spans> </a> </p></div> </div> </div> <div class="col-md-4"> <div class="panel panel-default"> <div class="panel-body text-center"> <a class="mas cursor" href="#/solicitud"> <span class="glyphicon glyphicon-plus xl-icon"></span> </a> </div> </div> </div> </div> <div class="row"> <span class="titulo-blanco col-xs-12"><span class="glyphicon glyphicon-book"></span> Clases en curso</span> <div ng-repeat="clase in clasesEnCurso" class="col-md-4"> <div class="panel panel-default"> <div class="panel-body"> <div ng-hide="hide" class="mas cursor" ng-click="sumarse(solicitud)"> <span class="glyphicon glyphicon-plus"></span> <spans> Me Sumo</spans> </div> <div class="col-xs-12 titulo-violeta">{{clase.name}}</div> <p class="col-xs-12">{{clase.description}}</p><p> </p><p class="col-xs-12">{{clase.user.firstName}} {{clase.user.lastName}}</p><p> </p></div> </div> </div> </div> <div class="row"> <span class="titulo-blanco col-xs-12"><span class="glyphicon glyphicon-book"></span> Clases programadas</span> <div ng-repeat="clase in clasesProgramadas" class="col-md-4"> <!--1--> <div class="panel panel-default"> <div class="panel-body"> <div ng-hide="hide" class="mas cursor" ng-click="sumarse(solicitud)"> <span class="glyphicon glyphicon-plus"></span> <spans> Me Sumo</spans> </div> <div class="col-xs-12 titulo-violeta">{{clase.name}}</div> <p class="col-xs-12">{{clase.description}}</p><p> </p><p class="col-xs-12">{{clase.user.firstName}} {{clase.user.lastName}}</p><p> </p></div> </div> </div> <div class="col-md-4"> <div class="panel panel-default"> <div class="panel-body text-center"> <a class="mas cursor" href="#/solicitud"> <span class="glyphicon glyphicon-plus xl-icon"></span> </a> </div> </div> </div> </div> <div class="row"> <span class="titulo-blanco col-xs-12"><span class="glyphicon glyphicon-book"></span> Usuarios m√°s relevantes</span> <div ng-repeat="usuario in usuarios" class="col-md-4"> <div class="panel panel-default"> <div class="panel-body"> <div class="col-xs-12 titulo-violeta">{{usuario.nick}}</div> <p class="col-xs-12">{{usuario.firstName}} {{usuario.lastName}}</p> <p class="col-xs-12">{{usuario.score}}</p> </div> </div> </div> </div> </div>'),a.put("views/login.html",'<div class="container"> <div class="row"> <div class="col-md-12 formulario"> <div class="panel"> <div class="panel-heading"> <div class="panel-title">Iniciar Sesi√≥n</div> </div> <div class="panel-body"> <div custom-form f-name="FormLogin" submit-action="login()" class="form-horizontal"> <div class="form-group"> <div class="col-xs-12"> <sc-input-label type="text" not-show-label="true" model="usuario.username" placeholder="Nombre de Usuario" help-msg="Ingrese su email" input-name="usernameUsuario" maxlength="50" minlength="4" required> </sc-input-label> </div> </div> <div class="form-group"> <div class="col-xs-12"> <sc-input-label type="password" not-show-label="true" model="usuario.password" placeholder="Contrase√±a" help-msg="Ingrese su contrase√±a, minimo 6 caracteres" input-name="passwordUsuario" maxlength="50" minlength="6" required> </sc-input-label> </div> </div> <div class="form-group"> <div class="col-md-12 buttonRegistro"> <button type="submit" class="btn btn-primary btn-md">Iniciar sesion</button> </div> </div>  </div> </div> </div> </div> </div> </div>'),a.put("views/presenciado.html",'<!--\n  Informacion:\n  -Cantidad de usuarios conectados a la clase.\n  -Video remoto\n  -Chat\n\n  Controles:\n  -Agrandar/achicar video local\n\n--> <div class="container presenciado-container"> <div class="row full-height-percent top-buffer"> <span ng-show="!claseFinalizada"> <div class="col-lg-8 col-md-8 col-xs-12"> <div class="row"> <div class="col-lg-12"> <div class="video-container" id="videoContainer"> <div class="video" id="remoteVideo"> </div> </div> </div> </div> </div> <!--En mobile esto se oculta y se ve se hace--> <div class="col-lg-4 col-md-4 full-height-percent"> <div class="row full-height-percent"> <div class="col-lg-11 col-md-11 full-height-percent overflow-hidden"> <!--CHAT CONTAINER--> <div class="row chat-container full-height-percent animation-chat" ng-class="showChat ? \'animation-show\' : \'animation-hide\'"> <div class="col-lg-12 messages-container"> <ul class="messages"> <div ng-repeat="message in messages"> {{ message.user.name }}: {{ message.data }} </div> </ul> </div> <div class="col-lg-12"> <form ng-submit="enviarMensaje()"> <div class="input-group"> <input type="text" class="form-control square-border" ng-model="myMessage"> <span class="input-group-btn"> <button class="btn btn-default square-border" type="submit"><span class="glyphicon glyphicon-chevron-right"></span></button> </span> </div> </form> </div> </div> <!--USUARIOS CONECTADOS CONTAINER--> <div class="row full-height-percent animation-chat" ng-class="showUsuariosConectados ? \'animation-show\' : \'animation-hide\'"> <h3>USUARIOS CONECTADOS</h3> <ul ng-repeat="usuario in usuariosConectados"> <li>{{usuario.nombre}}</li> </ul> </div> <!--CHAT CONFIGURACION CONTAINER--> <div class="row full-height-percent animation-chat" ng-class="showChatConfiguracion ? \'animation-show\' : \'animation-hide\'"> <div class="list-group"> <h3>CONFIGURACI√ìN</h3> <button type="button" class="list-group-item">Chat</button> <button type="button" class="list-group-item">Usuarios</button> <button type="button" class="list-group-item">Ayuda</button> <button type="button" class="list-group-item">Reportar problema</button> </div> </div> </div> <div class="col-lg-1 col-md-1"> <div class="row"> <div class="col-lg-12 no-padding margin-top-10"> <div class="icon-badge-container"> <button ng-click="abrirChat()" class="btn btn-default btn-lg btn-link square-border" ng-class="showChat ? \'active\': \'\'"> <span class="glyphicon glyphicon-comment"></span> </button> <span class="badge badge-notify">{{cantidadMensajes}}</span> </div> </div> <div class="col-lg-12 no-padding margin-top-10"> <div class="icon-badge-container"> <button ng-click="abrirUsuariosConectados()" class="btn btn-default btn-lg btn-link square-border" ng-class="showUsuariosConectados ? \'active\': \'\'"> <span class="glyphicon glyphicon-user"></span> </button> <span class="badge badge-notify">{{cantidadUsuariosConectados}}</span> </div> </div> <div class="col-lg-12 no-padding margin-top-10"> <button type="button" ng-click="abrirChatConfiguracion()" class="btn btn-default btn-lg btn-link square-border" aria-label="Left Align" ng-class="showChatConfiguracion ? \'active\': \'\'"> <span class="glyphicon glyphicon-cog" aria-hidden="true"></span> </button> </div> </div> </div> </div> </div> </span> <span ng-show="claseFinalizada && !userWasJoined"> <div class="col-xs-12"> <div class="resource-not-found"> <img src="images/logo_brain1.bf5e6816.png" alt=""> <div>Esta clase ya ha finalizado.</div> </div> </div> </span> <span ng-show="claseFinalizada && userWasJoined"> <div class="col-xs-12"> <div class="row clase-finalizada-container"> <div> {{clase.name}} </div> <div> <img src="/clase.user.avatar" alt=""> </div> <div> por {{clase.user.username}} </div> <div> ¬øQu√© te pareci√≥ la clase? <div> <a href="javascript:;" ng-click="calificar(1)" ng-mouseover="calificacion = 1" ng-class="calificacion >= 1 ? \'hover\' : \'no-hover\'"><span class="glyphicon glyphicon-heart"></span></a> <a href="javascript:;" ng-click="calificar(2)" ng-mouseover="calificacion = 2" ng-class="calificacion >= 2 ? \'hover\' : \'no-hover\'"><span class="glyphicon glyphicon-heart"></span></a> <a href="javascript:;" ng-click="calificar(3)" ng-mouseover="calificacion = 3" ng-class="calificacion >= 3 ? \'hover\' : \'no-hover\'"><span class="glyphicon glyphicon-heart"></span></a> <a href="javascript:;" ng-click="calificar(4)" ng-mouseover="calificacion = 4" ng-class="calificacion >= 4 ? \'hover\' : \'no-hover\'"><span class="glyphicon glyphicon-heart"></span></a> <a href="javascript:;" ng-click="calificar(5)" ng-mouseover="calificacion = 5" ng-class="calificacion >= 5 ? \'hover\' : \'no-hover\'"><span class="glyphicon glyphicon-heart"></span></a> </div> </div> </div> </div> </span> </div> </div>'),a.put("views/registro.html",'<div class="container"> <div class="row"> <div class="col-md-12 formulario"> <div class="panel"> <div class="panel-heading"> <div class="panel-title">Reg√≠strate</div> </div> <div class="panel-body"> <div custom-form f-name="FormRegistro" submit-action="guardar()" class="form-horizontal"> <div class="form-group"> <div class="col-xs-12"> <sc-input-label not-show-label="true" model="usuario.firstName" placeholder="Nombre" help-msg="Ingrese su nombre" input-name="nombreUsuario" maxlength="30" validators="[\'solo-letras\']" required> </sc-input-label> </div> </div> <div class="form-group"> <div class="col-xs-12"> <sc-input-label not-show-label="true" model="usuario.lastName" placeholder="Apellido" help-msg="Ingrese su apellido" input-name="apellidoUsuario" maxlength="30" validators="[\'solo-letras\']" required> </sc-input-label> </div> </div> <div class="form-group"> <div class="col-xs-12"> <sc-input-label type="text" not-show-label="true" model="usuario.username" placeholder="Nombre de Usuario" help-msg="Ingrese su nombre de usuario" input-name="usernameUsuario" maxlength="60" minlength="4" required> </sc-input-label> </div> </div> <div class="form-group"> <div class="col-xs-12"> <sc-input-label type="email" not-show-label="true" model="usuario.email" placeholder="Email" help-msg="Ingrese su email" input-name="emailUsuario" maxlength="50" minlength="4" required> </sc-input-label> </div> </div> <div class="form-group"> <div class="col-xs-12"> <sc-input-label type="password" not-show-label="true" model="usuario.password" placeholder="Contrase√±a" help-msg="Ingrese su contrase√±a, minimo 6 caracteres" input-name="passwordUsuario" maxlength="50" minlength="6" required> </sc-input-label> </div> </div> <div class="form-group"> <div class="col-xs-12"> <sc-input-label type="text" not-show-label="true" model="usuario.age" placeholder="Edad" help-msg="Ingrese su edad, debe ser mayor de 18 a√±os" input-name="edadUsuario" maxlength="2" minlength="2" validators="[\'solo-numeros\',\'sin-espacios\']" required> </sc-input-label> </div> </div> <div class="form-group"> <div class="col-md-12 buttonRegistro"> <button type="submit" class="btn btn-primary btn-md">Registrarme</button> </div> </div>  </div> </div> </div> </div> </div> </div>'),a.put("views/solicitud.consulta.html",'<div class="container"> <div class="row top-buffer"> <div class="col-xs-12"> <div ng-show="solicitudIsValid"> <form action="" ng-submit="tomarSolicitud()"> <div> <label for="fechaInput">Fecha y hora</label> <input type="date" id="fechaInput" name="fechaInputDate" ng-model="solicitud.date"> </div> <div> <label for="textarea">Descripci√≥n</label> <textarea name="textareaName" id="textarea" cols="30" rows="10"></textarea> </div> <button class="btn-sc" ng-click="solicitudTomada = true">QUIERO DAR ESTA CLASE!</button> <div ng-show="solicitudTomada"> <button type="submit" class="btn-sc btn-success-sc">CONFIRMAR</button> </div> </form> </div> </div> <div class="col-xs-12" ng-show="!solicitudIsValid && !isMakingRequest"> <div class="resource-not-found"> <img src="images/logo_brain1.bf5e6816.png" alt=""> <div>Esta solicitud no est&aacute disponible.</div> </div> </div> </div> </div>'),a.put("views/solicitud.crear.html",'<!--\nEntrada de datos\n-Nombre\n-Descripcion\n-Categoria\n\n--> <div class="container"> <div class="row top-buffer"> <div class="col-xs-12"> <h1>Crea tu solicitud</h1> <form ng-submit="save()"> <div> <label for="nombreInput">Nombre</label> <input type="text" id="nombreInput" name="nombreInputName" ng-model="solicitud.subject"> </div> <div> <label for="descripcionInput">Descripcion</label> <input type="text" id="descripcionInput" name="descripcionInputName" ng-model="solicitud.description"> </div> <div> <label for="categoriaSelect">Categor√≠a</label> <select name="categoriaSelectName" id="categoriaSelect" ng-options="option.name for option in categoriaList track by option.id" ng-model="solicitud.category"> <option value="">Seleccione una categoria</option> </select> </div> <div> <button type="submit" class="btn btn-primary btn-colon-primary btn-xs-block">Solicitar <span class="glyphicon spinner-button" ng-show="isMakingRequest"></button> </div> </form> </div> </div> </div>'),a.put("views/solicitudes.html",'<div class="containerBusquedas"> <div class="container-home container container-home" id="main"> <div class="row"> <span class="titulo-blanco col-xs-12"><span class="glyphicon glyphicon-book"></span>Solicitudes</span> </div> </div> <div class="container"> <div class="row"> <div ng-repeat="solicitud in solicitudes.content" class="col-md-4"> <div class="panel panel-default"> <div class="panel-body" ng-init="IfICanJoinSolicitud(solicitud)"> <div ng-show="solicitud.sumarse" class="mas cursor" ng-click="sumarse(solicitud)"> <span class="glyphicon glyphicon-plus"></span> <spans> Me Sumo </spans> </div> <div class="col-xs-12 titulo-violeta">{{solicitud.subject}}</div> <p class="col-xs-12">Personas interesadas: {{solicitud.totalUsers}}</p><p> </p><p class="col-xs-12">Estado: {{solicitud.state}}</p><p> <a class="mas cursor" href="#/solicitud/{{solicitud.id}}"> <span class="glyphicon glyphicon-user"></span> <spans>Quiero dar esta clase</spans> </a> </p></div> </div> </div> <div class="col-md-4"> <div ng-show="solicitudes.content.length == 0" class="mensajeTextoPlano">No hubo resultados para <span class="resaltadorTextoPlanoAmarillo">{{searcher}}</span></div> <div ng-show="solicitudes.content.length == 0" class="panel panel-default"> <div class="panel-head text-center"> ¬øDesea crear una nueva solicitud? </div> <div class="panel-body text-center"> <a class="mas cursor" href="#/solicitud"> <span class="glyphicon glyphicon-plus xl-icon"></span> </a> </div> </div> </div> </div> <ul ng-show="solicitudes.content.length < solicitudes.totalElements" uib-pagination boundary-links="true" total-items="solicitudes.totalElements" items-per-page="solicitudes.size" ng-model="currentPage" max-size="5" class="pagination-md" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"> </ul> </div> </div>'),a.put("views/usuario.panel.html",'<!--\nTemplate\nhttp://2.bp.blogspot.com/-SdaTxrvXTZA/VoZuEDWB3MI/AAAAAAAABkY/SfqekINgeSk/s1600/4_UserPanel.png\nInformacion\n-Clases programadas.\n-Clases finalizadas.\n-Clases en curso.\n-Clases presenciadas.\n-Clases faveadas.\n-Mensajes.\n\nAcciones\n-Ir a modificar datos personales.\n-Dictar clase programada.\n\n--> <div class="container"> <div class="row top-buffer"> <div class="col-xs-3"> <div class="row"> <div class="col-xs-12 text-center"> <img src="foto" alt=""> <h5>{{usuario.username}}</h5> <h6>{{usuario.firstName}} {{usuario.lastName}}</h6> </div> <div class="col-xs-12"> <ul> <li>Perfil</li> </ul> </div> </div> </div> <div class="col-xs-9 parent-panel-box"> <div class="row no-margin top-buffer-pad"> <div ng-show="showMenu" ng-click="showMenu = false; showMenuClasesProgramadas = true" class="col-md-4 top-buffer-less"> <div class="panel-box text-center"> <div> <span class="glyphicon glyphicon-time xl-icon"></span> <p>{{cantidadClasesProgramadas}} Clases programadas</p> </div> </div> </div> <div ng-show="showMenu" ng-click="showMenu = false; showMenuClasesFinalizadas = true" class="col-md-4 top-buffer-less"> <div class="panel-box text-center"> <div> <span class="glyphicon glyphicon-facetime-video xl-icon"></span> <p>{{cantidadClasesFinalizadas}} Clases finalizadas</p> </div> </div> </div> <div ng-show="showMenu" ng-click="showMenu = false; showMenuClasesPresenciadas = true" class="col-md-4 top-buffer-less"> <div class="panel-box text-center"> <div> <span class="glyphicon glyphicon-eye-open xl-icon"></span> <p>{{cantidadClasesPresenciadas}} Clases presenciadas</p> </div> </div> </div> <div ng-show="showMenu" ng-click="showMenu = false; showMenuClasesFavoritas = true" class="col-md-4 top-buffer-less"> <div class="panel-box text-center xl-icon"> <div> <span class="glyphicon glyphicon-star"></span> <p>{{cantidadClasesFavoritas}} Clases favoritas</p> </div> </div> </div> <div ng-show="showMenu" ng-click="showMenu = false; showMenuSolicitudesPendientes = true" class="col-md-4 top-buffer-less"> <div class="panel-box text-center xl-icon"> <div> <span class="glyphicon glyphicon-share"></span> <p>{{cantidadSolicitudesPendientes}} Solicitudes Pendientes</p> </div> </div> </div> <div ng-show="showMenu" ng-click="showMenu = false; showMenuSolicitudesARealizar = true" class="col-md-4 top-buffer-less"> <div class="panel-box text-center xl-icon"> <div> <span class="glyphicon glyphicon-check"></span> <p>{{cantidadSolicitudesARealizar}} Solicitudes a realizar</p> </div> </div> </div> <!--PANELES--> <div ng-show="showMenuClasesProgramadas" class="col-xs-12"> <div class="panel-box-item"> <div class="title">Clases programadas</div> <div class="panel-item" ng-repeat="clase in clasesProgramadas" ng-click="goToUrl(\'/clases/\'+clase.id)"> <div class="title">{{clase.name}}</div> <div>{{clase.description}}</div> <div>{{clase.date | date}}</div> </div> </div> </div> <div ng-show="showMenuClasesFinalizadas" class="col-xs-12"> <div class="panel-box-item"> <div class="title">Clases finalizadas</div> <div class="panel-item" ng-repeat="clase in clasesFinalizadas" ng-click="goToUrl(\'/clases/\'+clase.id)"> <div class="title">{{clase.name}}</div> <div>{{clase.description}}</div> <div>{{clase.date | date}}</div> </div> </div> </div> <div ng-show="showMenuClasesPresenciadas" class="col-xs-12"> <div class="panel-box-item"> <div class="title">Clases presenciadas</div> <div class="panel-item" ng-click="goToUrl(\'/clases/\'+clase.id)"> <div class="title">Angular Js</div> <div>Framework de javascript</div> <div>10 de Diciembre a las 18:00 hs</div> </div> </div> </div> <div ng-show="showMenuClasesFavoritas" class="col-xs-12"> <div class="panel-box-item"> <div class="title">Clases Favoritas</div> <div class="panel-item" ng-repeat="clase in clasesFavoritas" ng-click="goToUrl(\'/clases/\'+clase.id)"> <div class="title">{{clase.name}}</div> <div>{{clase.description}}</div> <div>{{clase.date | date}}</div> </div> </div> </div> <div ng-show="showMenuSolicitudesPendientes" class="col-xs-12"> <div class="panel-box-item"> <div class="title">Solicitudes</div> <div class="panel-item" ng-repeat="solicitud in solicitudesPendientes" ng-click="goToUrl(\'/solicitud/1\')"> <div class="title">{{solicitud.subject}}</div> <div>{{solicitud.description}}</div> <div>{{solicitud.joinedUsers.length}} personas se sumaron</div> </div> </div> </div> <div ng-show="showMenuSolicitudesARealizar" class="col-xs-12"> <div class="panel-box-item"> <div class="title">Solicitudes</div> <div class="panel-item" ng-repeat="solicitud in solicitudesARealizar" ng-click="goToUrl(\'/solicitud/\'+solicitud.id )"> <div class="title">{{solicitud.subject}}</div> <div>{{solicitud.description}}</div> <div>{{solicitud.joinedUsers.length}} personas se sumaron</div> </div> </div> </div> </div> </div> </div> </div>')}]);